# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type NodeEntity {
  id: Float!
  nodeAlias: String!
  includedAt: DateTime!
  rpcEndpoint: String!
  virtualBlockchainId: String
  isClaimable: Boolean!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type OrganisationEntity {
  id: Int!
  name: String!
  logoUrl: String
  published: Boolean!
  publishedAt: DateTime
  isDraft: Boolean!
  city: String!
  countryCode: String!
  website: String!
  publicSignatureKey: String!
  createdAt: DateTime!
  lastUpdateAt: DateTime!
  version: Int!
  virtualBlockchainId: String
  balance: String!
  users: [UserEntity!]!
  nodes: [NodeEntity!]!
  hasTokenAccount: Boolean!
  isAnchoredOnChain: Boolean!
  chainStatus: OrganisationChainStatusType!
  transactions(limit: Int!, fromHistoryHash: String): [TransactionType!]!
}

type UserEntity {
  publicKey: String!
  firstname: String!
  lastname: String!
  isAdmin: Boolean!
}

type ChallengeEntity {
  challenge: String!
}

type TransactionType {
  height: Int!
  previousHistoryHash: String!
  label: String!
  amountInAtomics: Float!
  transferredAt: String!
  linkedAccount: String!
  amount: String!
  chainReference: String!
}

type OrganisationChainStatusType {
  hasTokenAccount: Boolean!
  isPublishedOnChain: Boolean!
  hasEditedOrganization: Boolean!
}

type ChallengeVerificationResponse {
  token: String!
}

type ApiKeyType {
  id: Int!
  name: String!
  createdAt: DateTime!
  activeUntil: DateTime!
  isActive: Boolean!
  partialKey: String!
  application: ApplicationType!
  countUsages(filterByUnauthorised: Boolean!): Int!
  usages(limit: Int, offset: Int, filterByUnauthorized: Boolean): [ApiKeyUsageType!]!
}

type ApplicationType {
  id: Int!
  name: String!
  version: Int!
  logoUrl: String
  description: String
  domain: String
  website: String
  virtualBlockchainId: String
  lastUpdateAt: DateTime!
  createdAt: DateTime!
  published: Boolean!
  publishedAt: DateTime
  isDraft: Boolean!
  organisationId: Int!
}

type ApiKeyUsageType {
  id: Float!
  ip: String!
  usedAt: DateTime!
  requestUrl: String!
  requestMethod: String!
  responseStatus: String!
}

type RevealedApiKeyType {
  id: Int!
  name: String!
  createdAt: DateTime!
  activeUntil: DateTime!
  isActive: Boolean!
  partialKey: String!
  application: ApplicationType!
  countUsages(filterByUnauthorised: Boolean!): Int!
  usages(limit: Int, offset: Int, filterByUnauthorized: Boolean): [ApiKeyUsageType!]!
  key: String!
}

type OrganisationStatsDto {
  numberOfApplications: Int!
  numberOfUsers: Int!
}

type Query {
  organisations: [OrganisationEntity!]!
  organisation(id: Int!): OrganisationEntity!
  getChallenge: ChallengeEntity!
  getCurrentUser: UserEntity!
  searchUser(search: String!): [UserEntity!]!
  getAllUsers: [UserEntity!]!
  getUserByPublicKey(publicKey: String!): UserEntity!
  getOrganisationStatistics(id: Int!): OrganisationStatsDto!
  getAllApiKeysOfOrganisation(organisationId: Int!): [ApiKeyType!]!
  getAllApiKeysOfApplication(applicationId: Int!): [ApiKeyType!]!
  getApiKey(id: Int!): ApiKeyType!
  isInitialised: Boolean!
  getLinkedNode: String!
  getAllApplicationsInOrganisation(organisationId: Int!): [ApplicationType!]!
  getAllApplications: [ApplicationType!]!
  getApplicationInOrganisation(applicationId: Int!): ApplicationType!
}

type Mutation {
  createOrganisation(name: String!, privateKey: String): OrganisationEntity!
  updateOrganisation(id: Int!, name: String!, countryCode: String!, website: String!, city: String!): OrganisationEntity!
  forceChainSync(id: Int!): Boolean!
  publishOrganisation(id: Int!): Boolean!
  deleteOrganisation(id: Int!): OrganisationEntity!
  addUserInOrganisation(organisationId: Int!, userPublicKey: String!): Boolean!
  importNodeInOrganisation(organisationId: Int!, nodeAlias: String!, nodeRpcEndpoint: String!): Boolean!
  removeUserFromOrganisation(organisationId: Int!, userPublicKey: String!): Boolean!
  changeOrganisationKeyPair(organisationId: Int!, privateKey: String!): Boolean!
  verifyChallenge(challenge: String!, publicKey: String!, signature: String!): ChallengeVerificationResponse!
  createUser(publicKey: String!, firstname: String!, lastname: String!, isAdmin: Boolean!): UserEntity!
  updateUserAdminStatus(publicKey: String!, isAdmin: Boolean!): UserEntity!
  deleteUser(publicKey: String!): UserEntity!
  createApiKey(applicationId: Int!, name: String!, activeUntil: String!): RevealedApiKeyType!
  updateApiKey(id: Int!, name: String!, isActive: Boolean!, activeUntil: String): Boolean!
  deleteApiKey(id: Int!): Boolean!
  setupFirstAdministrator(setupFirstAdmin: SetupFirstAdminDto!): Boolean!
  createApplicationInOrganisation(organisationId: Int!, applicationName: String!): ApplicationType!
  publishApplication(applicationId: Int!): Boolean!
  deleteApplicationInOrganisation(applicationId: Int!): Boolean!
  updateApplicationInOrganisation(applicationId: Int!, applicationUpdate: ApplicationUpdateDto!): ApplicationType!
  deleteNodeInOrganisation(organisationId: Int!, nodeId: Int!): Boolean!
  updateNodeInOrganisation(organisationId: Int!, nodeId: Int!, nodeAlias: String!, nodeRpcEndpoint: String!): NodeEntity!
  claimNodeInOrganisation(organisationId: Int!, nodeId: Int!): NodeEntity!
}

input SetupFirstAdminDto {
  publicKey: String!
  firstname: String!
  lastname: String!
  token: String!
}

input ApplicationUpdateDto {
  name: String!
  logoUrl: String
  description: String
  domain: String
  website: String
}