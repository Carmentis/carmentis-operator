# Carmentis Workspace Front

This repository provides the front-end server for the Carmentis Workspace. The workspace is a web application used by
administrators to manage organizations, applications, and oracles within the Carmentis ecosystem. It operates closely
with the Carmentis Operator (back-end server) to provide its functionality.

## Features

- Create and manage organizations, applications, and oracles.
- Interacts with the back-end operator to handle API requests, key signing, and blockchain publication.
- Serves as the front-end interface for administrators.

## Prerequisites

- Node.js and npm installed on your local machine.
- Docker (optional, for containerized deployment).

## Manual Launch Instructions

To run the workspace manually like any other Next.js project, follow these steps:

1. Clone the repository.
   ```bash
   git clone <repository-url>
   cd <repository-folder>
   ```

2. Install dependencies.
   ```bash
   npm install
   ```

3. Define the required environment variables:
    - `PORT`: The port on which the workspace front will run.
    - `OPERATOR_URL`: The URL of the operator (Carmentis back-end server).

4. Run the development server.
   ```bash
   PORT=4005 OPERATOR_URL=http://localhost:4002 npm run dev
   ```

5. The application will be accessible at [http://localhost:4005](http://localhost:4005).

## Docker Launch Instructions

### Using Published Docker Image

To run the workspace using the already published Docker image, use the following command:

```bash
docker run --env PORT=4005 --env OPERATOR_URL=http://host.docker.internal:4002 -p 4005:4005 --name carmentis-operator-front --rm ghcr.io/carmentis/operator/front
```

### Build and Run Docker Image Locally

To build and run the workspace Docker image locally, follow these steps:

1. Build the Docker image.
   ```bash
   docker build -t carmentis-operator-front .
   ```

2. Run the Docker image.
   ```bash
   docker run --env PORT=4005 --env OPERATOR_URL=http://host.docker.internal:4002 -p 4005:4005 --name carmentis-operator-front --rm carmentis-operator-front
   ```

## Development Setup

### Launching procedure
For development and collaboration:

- Ensure proper environment variables are set in a `.env` file or through other means.
- Use `npm run dev` for a hot-reloading development server.

### Workspace GraphQL synchronisation
A part of the code executed by the workspace is automatically generated by Codegen from the definition
provided by the operator. Following this way, we avoid (handwritten) duplication code. The generated code should
be added to the git (since it is source code rather than artifacts).
To generate the code, execute `npm run codegen` in the workspace directory, or `npm run codegen:watch` to regenerate
the source code when a modification is detected on the operator side.

## Environment Variables

The following environment variables are required for running the workspace:

- **PORT**: Specifies the port the front-end server will run on. Example: `4005`.
- **OPERATOR_URL**: Specifies the back-end operator API URL. Example: `http://host.docker.internal:4002`.

## Licensing

The project is licensed under the terms of the applicable license.

---

For more information about Carmentis or its ecosystem, refer to the official documentation.